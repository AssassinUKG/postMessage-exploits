# postMessage-exploits

## What is a postMessage?

From Mozilla:

- The window.postMessage() method safely enables cross-origin communication between Window objects; e.g., between a page and a pop-up that it spawned, or between a page and an iframe embedded within it.


## Example 1
*works in firefox by default  
for chrome to work change the postMessageExploit.html page code to this*

```
	setTimeout(function(){
	let msg={url : "javascript:prompt(1)"};
	var iFrame = document.getElementById("frame")
	iFrame.contentWindow.postMessage(msg, '*');
}, 2000);
```

### website 1

This page is a basic exmaple with 2 buttons.  
button1 opens the webpage in a new child window  
button2 sends a normal post message call to update a url on the page

### website 2

This page is the testpage (vunerable webpage), It takes a postmessage with parameters (msg, "\*")  
It will change the URL after button 2 is cliked on website 1

### postmessageexploit

This page will load our postmessage and when you click go back, a prompt box will appear
